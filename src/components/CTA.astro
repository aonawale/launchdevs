---
import { SITE_CONFIG, getEmailLink } from '../config/site.ts';
// CTA.astro - Strong final call-to-action with signup form (email input + submit button)
---

<section id="signup" class="py-24 bg-gradient-to-br from-blue-600 via-blue-700 to-purple-700 text-white relative overflow-hidden">
  <!-- Animated background -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-1/4 left-10 w-96 h-96 bg-white/5 rounded-full filter blur-3xl animate-pulse"></div>
    <div class="absolute bottom-1/4 right-10 w-96 h-96 bg-violet-500/10 rounded-full filter blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
  </div>

  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="max-w-3xl mx-auto text-center">
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-6 leading-tight animate-fade-in-up">
        Ready to Launch Your Tech Career?
      </h2>

      <p class="text-xl sm:text-2xl mb-10 text-blue-100 leading-relaxed animate-fade-in-up" style="animation-delay: 0.1s;">
        Whether you're a new graduate, student, or changing careers, get personalized guidance
        from an experienced software engineer who's helped 30+ people land their first tech roles.
      </p>

      <!-- Signup Form -->
      <div class="bg-white/95 backdrop-blur-md rounded-3xl p-10 mb-10 shadow-2xl border border-white/30 animate-fade-in-up" style="animation-delay: 0.2s;">
        <form id="mentorship-form" class="space-y-6" data-netlify="true" netlify-honeypot="bot-field" name="subscribe" action="/thank-you" method="POST" onsubmit="if(window.trackFormSubmission) return window.trackFormSubmission(); return true;" aria-label="Mentorship signup form">
          <!-- Netlify Configuration -->
          <p class="hidden">
            <label>
              Don't fill this out if you're human: <input name="bot-field" type="text" />
            </label>
          </p>
          <input type="hidden" name="subject" data-remove-prefix="true" value={`New Submission from ${SITE_CONFIG.name}`} />

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            <div class="text-left">
              <label for="firstName" class="block text-sm font-semibold text-gray-700 mb-2">
                First Name *
              </label>
              <input
                type="text"
                id="firstName"
                name="firstName"
                required
                aria-required="true"
                aria-label="First name"
                class="w-full px-4 py-3.5 bg-white border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                placeholder="John"
              />
            </div>
            <div class="text-left">
              <label for="lastName" class="block text-sm font-semibold text-gray-700 mb-2">
                Last Name *
              </label>
              <input
                type="text"
                id="lastName"
                name="lastName"
                required
                aria-required="true"
                aria-label="Last name"
                class="w-full px-4 py-3.5 bg-white border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                placeholder="Doe"
              />
            </div>
          </div>

          <div class="text-left">
            <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
              Email Address *
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              aria-required="true"
              aria-label="Email address"
              class="w-full px-4 py-3.5 bg-white border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
              placeholder="john.doe@example.com"
            />
          </div>

          <div class="text-left">
            <label for="currentSituation" class="block text-sm font-semibold text-gray-700 mb-2">
              What describes you best? *
            </label>
            <select
              id="currentSituation"
              name="currentSituation"
              required
              aria-required="true"
              aria-label="Current situation"
              class="w-full px-4 py-3.5 bg-white border-2 border-gray-200 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10"
            >
              <option value="">Select your situation</option>
              <option value="Recent Graduate">Recent Graduate</option>
              <option value="Current Student">Current Student</option>
              <option value="Career Changer">Career Changer (Non-Tech Background)</option>
              <option value="Self-Taught Developer">Self-Taught Developer</option>
              <option value="Junior Developer">Junior Developer (&lt; 2 years)</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="text-left">
            <label for="goals" class="block text-sm font-semibold text-gray-700 mb-2">
              Career Goals (Optional)
            </label>
            <textarea
              id="goals"
              name="goals"
              rows="4"
              aria-label="Career goals"
              class="w-full px-4 py-3.5 bg-white border-2 border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none"
              placeholder="Tell us about your career aspirations..."
            ></textarea>
          </div>

          <button
            type="submit"
            aria-label="Submit mentorship application"
            class="w-full btn-primary bg-gradient-to-r from-blue-600 to-violet-600 text-white py-5 px-8 rounded-xl text-lg font-bold hover:from-blue-700 hover:to-violet-700 transform hover:scale-105 transition-all duration-200 shadow-xl hover:shadow-2xl cursor-pointer flex items-center justify-center gap-2"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            Start My Mentorship Journey
          </button>
        </form>

        <!-- Trust Indicators -->
        <div class="mt-8 flex flex-col sm:flex-row items-center justify-center gap-6 text-sm text-gray-600">
          <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
              <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
              </svg>
            </div>
            <span class="font-medium">Your info is private</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
              <svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
              </svg>
            </div>
            <span class="font-medium">No spam, ever</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-violet-100 rounded-full flex items-center justify-center">
              <svg class="w-4 h-4 text-violet-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
              </svg>
            </div>
            <span class="font-medium">Free consultation call</span>
          </div>
        </div>
      </div>

      <!-- Value Message -->
      <div class="bg-white/10 backdrop-blur-md text-white rounded-2xl p-8 mb-8 border border-white/20 shadow-lg">
        <div class="flex items-start gap-4">
          <div class="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center flex-shrink-0">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div class="text-left flex-1">
            <h3 class="font-bold text-xl mb-2">What Happens Next?</h3>
            <p class="text-blue-100 leading-relaxed">
              After submitting this form, I'll personally review your info and reach out within 24 hours
              to schedule a free 30-minute consultation call to discuss your goals and how I can help.
            </p>
          </div>
        </div>
      </div>

      <p class="text-blue-100 text-sm">
        Questions? Email me at{' '}
        <a href={getEmailLink('Question about mentorship program')} class="text-white font-semibold underline hover:no-underline transition-colors">
          {SITE_CONFIG.email}
        </a>
      </p>
    </div>
  </div>
</section>

<script>
  window.trackFormSubmission = function(): boolean {
    // Track analytics
    if (window.analytics) {
      window.analytics.trackFormSubmit();
    }

    return true;
  };
</script>
